<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vote for Your Favorite Tennis Player</title>
  <link rel="stylesheet" href="css/test.css">
</head>
<body>
  <div id="transition-overlay" style="display: none;">
    <img src="images/tennis-ball.png" id="bouncing-ball" />
  </div>
  <div class="vote-form">
    <select id="player-category">
      <option value="all">All Players</option>
      <option value="men">Men</option>
      <option value="women">Women</option>
    </select>

    <select id="player-select"></select>
    <input type="text" id="player-name" placeholder="Enter your GOAT's name" style="display:none;">
    <button id="vote-button" type="button">Vote ðŸŽ¾</button>
  </div>

  <div class="bottom-charts">
    <section class="chart-container">
      <div class="chart-content">
        <h2>Let the users vote</h2>
        <canvas id="voteChart" width="600" height="300"></canvas>
      </div>
    </section>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.umd.min.js"></script>
  <script src="js/test.js"></script>

  <script>
  const overlay = document.getElementById('transition-overlay');
  const ball = document.getElementById('bouncing-ball');

  function animateBounceAndNavigate(url) {
    overlay.style.display = 'block';

    let x = 0;
    let y = 0;
    let vx = 12; // X speed
    let vy = 9; // Y speed
    const ballSize = 60;

    const screenW = window.innerWidth;
    const screenH = window.innerHeight;

    const interval = setInterval(() => {
      x += vx;
      y += vy;

      if (x + ballSize >= screenW || x <= 0) vx *= -1;
      if (y + ballSize >= screenH || y <= 0) vy *= -1;

      ball.style.left = `${x}px`;
      ball.style.top = `${y}px`;
    }, 16); // ~60fps

    // Stop after 2 seconds and navigate
    setTimeout(() => {
      clearInterval(interval);
      window.location.href = url;
    }, 2000);
  }

  document.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', function (e) {
      const url = this.href;
      if (url.startsWith(window.location.origin)) {
        e.preventDefault();
        animateBounceAndNavigate(url);
      }
    });
  });
</script>
</body>
</html>