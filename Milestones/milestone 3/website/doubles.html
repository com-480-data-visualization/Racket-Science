<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Data Visualization Project</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="transition-overlay" style="display: none;">
    <img src="images/tennis-ball.png" id="bouncing-ball" />
  </div>
  <img src="images/drag-broom.png" id="drag-broom" />

  <nav>
    <ul class="width-limited">
      <li><a href="index.html">Global</a></li>
      <li><a href="doubles.html" class="active">Doubles</a></li>
      <li><a href="surfaces.html">Surfaces</a></li>
      <li><a href="services.html">Services</a></li>
      <li><a href="net.html">Net</a></li>
      <li><a href="tournament.html">Tournament</a></li>
      <li><a href="compare.html">Compare</a></li>
    </ul>
  </nav>

  <header>
    <h1>Doubles GOAT</h1>
  </header>

  <main class="charts-wrapper">
    <div class="top-charts" id="chart-swiper">
      <!-- Podium chart -->
      <section class="chart-container top-chart" id="podium">
        <!-- content omitted for brevity -->
      </section>

      <!-- Over the years chart -->
      <section class="chart-container top-chart" id="over_the_years">
        <!-- content omitted for brevity -->
      </section>

      <div class="nav-dots">
        <span class="dot" onclick="goToChart(1)"></span>
        <span class="dot active" onclick="goToChart(2)"></span>
      </div>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 - We hope this site is an ace. Proudly served with love by RÃ©za Machraoui, Luna Ralet & Leila Sidjanski.</p>
  </footer>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="js/main.js"></script>
  <script>
  const overlay = document.getElementById('transition-overlay');
  const ball = document.getElementById('bouncing-ball');

  function animateBounceAndNavigate(url) {
    overlay.style.display = 'block';

    let x = 0;
    let y = 0;
    let vx = 12; // X speed
    let vy = 9; // Y speed
    const ballSize = 60;

    const screenW = window.innerWidth;
    const screenH = window.innerHeight;

    const interval = setInterval(() => {
      x += vx;
      y += vy;

      if (x + ballSize >= screenW || x <= 0) vx *= -1;
      if (y + ballSize >= screenH || y <= 0) vy *= -1;

      ball.style.left = `${x}px`;
      ball.style.top = `${y}px`;
    }, 16); // ~60fps

    // Stop after 2 seconds and navigate
    setTimeout(() => {
      clearInterval(interval);
      window.location.href = url;
    }, 2000);
  }

  document.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', function (e) {
      const url = this.href;
      if (url.startsWith(window.location.origin)) {
        e.preventDefault();
        animateBounceAndNavigate(url);
      }
    });
  });
</script>
</body>
</html>
